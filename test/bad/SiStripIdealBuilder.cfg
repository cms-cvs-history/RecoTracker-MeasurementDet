process ICALIB = {
    service = MessageLogger {
	untracked vstring destinations = { "cout" }
	untracked PSet cout = { untracked string threshold = "INFO" }
    }

    source = EmptyIOVSource {
	string timetype = "runnumber"
        uint64 firstValue = 1
	uint64 lastValue = 1
        uint64 interval = 1
    }
    untracked PSet maxEvents = {untracked int32 input = 1}
  
    
    service = PoolDBOutputService{
	string connect = "sqlite_file:dbfile.db"    
	string timetype = "runnumber"    
	untracked string BlobStreamerName="DefaultBlobStreamingService"
	PSet DBParameters = {
	    untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
	}
	
        VPSet toPut={ { string record = "SiStripBadStrip" string tag = "SiStripBadFiber_v1"},
                      { string record = "SiStripBadStrip" string tag = "SiStripBadModule_v1"},
                      { string record = "SiStripBadStrip" string tag = "SiStripBadChannel_v1"} }
    }
        
    module prodF =  SiStripBadFiberBuilder {

	untracked bool   printDebug         = true
	untracked FileInPath file = "CalibTracker/SiStripCommon/data/SiStripDetInfo.dat"

	untracked VPSet BadComponentList = { 
            { uint32 BadModule = 470178036 vuint32 BadApvList = {0} }
        }

	bool SinceAppendMode = true
	string IOVMode	     = "Run"
	string Record        = "SiStripBadStrip"
	bool doStoreOnDB     = true
    }

       
    module prodM =  SiStripBadModuleByHandBuilder {

	untracked bool   printDebug         = true
	untracked FileInPath file = "CalibTracker/SiStripCommon/data/SiStripDetInfo.dat"

	untracked vuint32 BadModuleList = { 470178036 }

	bool SinceAppendMode = true
	string IOVMode	     = "Run"
	string Record        = "SiStripBadStrip"
	bool doStoreOnDB     = true
    }
       
    module prodS =  SiStripBadChannelBuilder {

	untracked bool   printDebug         = true
	untracked FileInPath file = "CalibTracker/SiStripCommon/data/SiStripDetInfo.dat"

	untracked VPSet BadComponentList = { 
            { uint32 BadModule = 470178036 vuint32 BadChannelList = {0} }
    	}

	bool SinceAppendMode = true
	string IOVMode	     = "Run"
	string Record        = "SiStripBadStrip"
	bool doStoreOnDB     = true
    }

    path p = { prodM, prodF, prodS }

    module print = AsciiOutputModule {}
    endpath ep = { print }
}

