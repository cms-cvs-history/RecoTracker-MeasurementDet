process TEST = {
    service = MessageLogger {
        untracked vstring destinations = { "detailedInfo.txt", "critical.txt"   }
        untracked vstring categories   = { "TkStripMeasurementDet" }
        untracked PSet detailedInfo.txt = { 
            untracked string threshold             = "DEBUG"   
            untracked PSet   INFO                  = { untracked int32 limit = 0 }
            untracked PSet   DEBUG                 = { untracked int32 limit = 0 }
            untracked PSet   TkStripMeasurementDet = { untracked int32 limit = 10000000}
        } 
        untracked vstring debugModules =  { "ckfTrackCandidates"     }
    }

    include "RecoTracker/MeasurementDet/test/bad/source.cff"
    
    es_source a = PoolDBESSource {
        string appendToDataLabel = "SiStripBadModule_v1"
        VPSet toGet = { { string record = "SiStripBadModuleRcd"  string tag = "SiStripBadModule_v1"} }
        string connect = "sqlite_file:dbfile.db"
        string timetype = "runnumber"
        untracked string BlobStreamerName="DefaultBlobStreamingService"
        PSet DBParameters ={
            untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
        }
    }

    es_source b = PoolDBESSource {
        string appendToDataLabel = "SiStripBadFiber_v1"
        VPSet toGet = { { string record = "SiStripBadFiberRcd"   string tag = "SiStripBadFiber_v1"} }
        string connect = "sqlite_file:dbfile.db"
        string timetype = "runnumber"
        untracked string BlobStreamerName="DefaultBlobStreamingService"
        PSet DBParameters ={
            untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
        }
    }

    es_source c = PoolDBESSource {
        string appendToDataLabel = "SiStripBadChannel_v1"
        VPSet toGet = { { string record = "SiStripBadChannelRcd" string tag = "SiStripBadChannel_v1"} }
        string connect = "sqlite_file:dbfile-badstrip.db"
        string timetype = "runnumber"
        untracked string BlobStreamerName="DefaultBlobStreamingService"
        PSet DBParameters ={
            untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
        }
    }


    include "CalibTracker/SiStripESProducers/data/SiStripQualityESProducer.cfi"

    include "Configuration/StandardSequences/data/Reconstruction.cff"
    include "Configuration/StandardSequences/data/FakeConditions.cff"


    replace MeasurementTracker.UseStripStripQualityDB = true
    replace MeasurementTracker.DebugStripStripQualityDB = true

    path p = { ckftracks }
 
    untracked PSet maxEvents = {
        untracked int32 input = 10
    }
    untracked PSet options = { untracked bool wantSummary = true }

    module info = AsciiOutputModule{}
    include "RecoTracker/MeasurementDet/test/bad/validation.cff"
    endpath e = { info }

}
